<toolbar></toolbar>
<h2> Corsi </h2>
<div class="example-header">
  <md-input-container floatPlaceholder="never">
    <input mdInput #filter placeholder="Ricerca corsi">
  </md-input-container>
  <button md-icon-button (click)="addCorso()">
        <md-icon mdTooltip="Nuovo" mdTooltipPosition="above">add</md-icon>    
      </button>
</div>

<md-table #table [dataSource]="corsiSource" mdSort>
  <!--TODO prevedere aggiunta e cancellazione Corsi di Laurea-->
  <!--- Note that these columns can be defined in any order.
            The actual rendered columns are set as a property on the row definition" -->
  <ng-container cdkColumnDef="id">
    <md-header-cell *cdkHeaderCellDef md-sort-header> Id </md-header-cell>
    <md-cell *cdkCellDef="let row"> {{row.id}} </md-cell>
  </ng-container>

  <ng-container cdkColumnDef="nome">
    <md-header-cell *cdkHeaderCellDef md-sort-header> Nome </md-header-cell>
    <md-cell *cdkCellDef="let row; let ind = index">
      <text-viewedit [flag]="editing[ind]" [(ngModel)]="row.nome" placeholder="Nome"></text-viewedit>
    </md-cell>
  </ng-container>

  <ng-container cdkColumnDef="azioni">
    <md-header-cell *cdkHeaderCellDef> Azioni </md-header-cell>
    <md-cell *cdkCellDef="let row; let ind = index">
      <button md-icon-button (click)="editing[ind] = true" *ngIf="!editing[ind]">
          <md-icon mdTooltip="Modifica" mdTooltipPosition="right">mode_edit</md-icon>
        </button>
      <ng-container *ngIf="editing[ind]">
        <button md-icon-button (click)="revertCorso(row, ind)">
            <md-icon mdTooltip="Annulla" mdTooltipPosition="left">close</md-icon>
          </button>
        <button md-icon-button (click)="updateCorso(row, ind)">
            <md-icon mdTooltip="Conferma" mdTooltipPosition="above">done</md-icon>
          </button>
        <button md-icon-button (click)="deleteCorso(row)">
            <md-icon mdTooltip="Elimina" mdTooltipPosition="right">delete</md-icon>
          </button>
      </ng-container>
    </md-cell>
  </ng-container>

  <md-header-row *cdkHeaderRowDef="displayedColumns"></md-header-row>
  <md-row *cdkRowDef="let row; columns: displayedColumns;"></md-row>
</md-table>